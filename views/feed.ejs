<link rel="stylesheet" href="/css/feed.css">

<main>
    <a id = "scroll-to-top-btn" class="btn-floating btn-large waves-effect waves-light red transparent-opacity">
        <i class="fas fa-arrow-up"></i>
    </a>
    <section class = "post-section row">
        <div class = "col xs0 s0 m1 l2 xl3">

        </div>
        <div class = "col xs12 s12 m10 l8 xl6 post-card">
            <form action = "/posts/create" method = "POST" class = "card">
                <span class = "card-title">What's on your Mind?</span>
                <div class = "input-field">
                    <textarea name = "content" id = "content" class = "materialize-textarea" cols="30" rows="3" required></textarea>
                    <label for="content">Write a Post</label>
                </div>
                <div class = "center-align">
                    <button class="btn waves-effect waves-light" type="submit">Post
                        <i class="fa fa-paper-plane" aria-hidden="true"></i>
                    </button>
                </div>
            </form>
        </div>
        <div class = "col xs0 s0 m1 l2 xl3">

        </div>
    </section>

    <section class = "feed-section row">
        <div class = "col xs0 s0 m1 l2 xl3">

        </div>
        <div class = "col xs12 s12 m10 l8 xl6">
            <div class = "center-align">
                <h4>Your Feed</h4>
            </div>
            <div class = "feed-posts-container">
                <% for(post of posts){ %>
                    <div class = "post card">
                        <h5><%= post.user.name %></h5>
                        <p class = "#e0e0e0 grey-text lighten-2"><i class="fas fa-globe"></i> <%= post.createdAt %></p>
                        <hr>
                        <div>
                            <%= post.content %> 
                        </div>
                        <div class = "like-comment-numbers">
                            <div class = "like-numbers">
                                0 <i class = "far fa-thumbs-up"></i>
                            </div>
                            <div class = "comment-numbers">
                                <i class = "far fa-comment"></i> <%= post.comments.length %> 
                            </div>
                        </div>
                        <div class = "like-comment-tab row" id = "like-comment-tab">
                            <div class = "col xs6 s6 m6 l6 xl6 center-align waves-effect waves-blue like-btn">
                                <i class = "far fa-thumbs-up"></i> Like
                            </div>
                            <div class = "col xs6 s6 m6 l6 xl6 center-align waves-effect waves-green comment-btn">
                                <i class = "far fa-comment"></i> Comment
                            </div>
                        </div>
                        <div class = "post-comments">
                            <form action = "/comments/create" method = "POST">
                                <div class = "input-field">
                                    <input type = "text" name = "content" id = "comment-content" placeholder = "Add a comment..." required>
                                </div>
                                <input type = "hidden" name = "post" value = <%= post._id %>>
                                <button class="btn blue waves-effect waves-light" type="submit">Post
                                    <i class="fa fa-paper-plane" aria-hidden="true"></i>
                                </button>
                            </form>

                            <div class = "comments-container">
                                <% for(comment of post.comments){ %>
                                    <div class = "comment">
                                        <h5><%= comment.user.name %></h5>
                                        <p><%= comment.content %></p>
                                    </div>
                                <% } %> 
                            </div>
                        </div>
                    </div> 
                <% } %> 
            </div>
        </div>
        <div class = "col xs0 s0 m1 l2 xl3">
            
        </div>
    </section>
</main>

<script src = "/js/feed.js"></script>